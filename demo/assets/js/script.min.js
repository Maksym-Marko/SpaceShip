"use strict";function eachObjProps(e,t){var s=0;for(s in e)if(!1===t.call(e[s],s,e[s]))break;return e}var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Management=function(){function e(t,s){_classCallCheck(this,e),this.wheelWrap=document.getElementById(s),this.wheel=document.getElementById(t),this.posLeft=0,this.posTop=0,this.wheelWrapGBCR=this.wheelWrap.getBoundingClientRect(),this.wheelGBCR=this.wheel.getBoundingClientRect(),this.centerRectWrapX=this.wheelWrapGBCR.width/2,this.centerRectWrapY=this.wheelWrapGBCR.height/2,this.keyFirstDrag=!0,this.keyMoveX=!1,this.keyMoveY=!1,this.backSpeed=5,this.init()}return _createClass(e,[{key:"runWhell",value:function(){var e=this;this.wheel.onmousedown=function(t){var s=e.wheelWrap.getBoundingClientRect(),i=e.wheel.getBoundingClientRect();e.wheelGBCR=i,e.wheelWrap.onmousemove=function(t){var n=t.clientX-s.left,a=i.width/2,h=s.width-i.width/2;n<=a?n=a:n>=h&&(n=h);var o=t.clientY-s.top,r=i.height/2,c=s.height-i.height/2;o<=r?o=r:o>=c&&(o=c),e.movementWhell(n,o)}},document.onmouseup=function(){e.wheelWrap.onmousemove=function(){},e.keyMoveX=!0,e.keyMoveY=!0}}},{key:"movementWhell",value:function(e,t){this.wheel.style.left=e+"px",this.wheel.style.top=t+"px",this.posLeft=e,this.posTop=t}},{key:"backWheel",value:function(){!0===this.keyFirstDrag&&(this.posLeft=this.centerRectWrapX,this.posTop=this.centerRectWrapY,this.keyFirstDrag=!1),!0===this.keyMoveX&&(this.posLeft<this.centerRectWrapX-this.backSpeed?this.posLeft+=this.backSpeed:this.posLeft>this.centerRectWrapX+this.backSpeed?this.posLeft-=this.backSpeed:(this.posLeft=this.centerRectWrapX,this.keyMoveX=!1),this.movementWhell(this.posLeft,this.posTop)),!0===this.keyMoveY&&(this.posTop<this.centerRectWrapY-this.backSpeed?this.posTop+=this.backSpeed:this.posTop>this.centerRectWrapY+this.backSpeed?this.posTop-=this.backSpeed:(this.posTop=this.centerRectWrapY,this.keyMoveY=!1),this.movementWhell(this.posLeft,this.posTop))}},{key:"speedCanvasMovement",value:function(){this.backWheel();return{speedLeft:(this.centerRectWrapX-this.posLeft)/10,speedTop:(this.centerRectWrapY-this.posTop)/10}}},{key:"init",value:function(){this.runWhell()}}]),e}();_createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var DrawSpaceElements=function(){function e(t,s,i){_classCallCheck(this,e),this.ctx=t,this.pos1=s,this.pos2=i,this.init()}return _createClass(e,[{key:"createStar",value:function(){this.ctx.beginPath(),this.ctx.arc(this.pos1,this.pos2,10,0,2*Math.PI),this.ctx.fillStyle="green",this.ctx.fill()}},{key:"init",value:function(){this.createStar()}}]),e}();_createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var FinallClass=function(){function e(t,s,i,n,a){_classCallCheck(this,e),this.idCanvas=t,this.wheel=s,this.wheelWrap=i,this.widthCanvas=n,this.heightCanvas=a,this.declareVariables(),this.setSizeCanvas(this.widthCanvas,this.heightCanvas)}return _createClass(e,[{key:"declareVariables",value:function(){this.canvas=document.getElementById(this.idCanvas),this.ctx=this.canvas.getContext("2d"),this.increment=0,this.minLeft=0,this.minTop=0,this.maxLeft=this.widthCanvas,this.maxTop=this.heightCanvas,this.objStars={},this.firstStar=0,this.countStars=10,this.posCanvasLeft=0,this.posCanvasTop=0}},{key:"managementWheel",value:function(){return new Management(this.wheel,this.wheelWrap)}},{key:"setObjStars",value:function(e,t){var s=this.getRandomStr(.1,e,t);if(null!==s){var i="star"+this.firstStar;this.objStars[i]={leftSpace:s.leftSpace,topSpace:s.topSpace},this.firstStar+=1;var n=Object.keys(this.objStars).length,a="star"+(this.firstStar-this.countStars);n>=this.countStars&&delete this.objStars[a]}}},{key:"getRandomStr",value:function(e,t,s){if(this.increment=this.increment+e,this.minLeft=parseInt(this.minLeft-t),this.minTop=parseInt(this.minTop-s),this.maxLeft=parseInt(this.maxLeft-t),this.maxTop=parseInt(this.maxTop-s),this.increment>=10){var i=Math.floor(Math.random()*(this.maxLeft-this.minLeft+1))+this.minLeft,n=Math.floor(Math.random()*(this.maxTop-this.minTop+1))+this.minTop;return this.increment=0,{leftSpace:i,topSpace:n}}return null}},{key:"setSizeCanvas",value:function(e,t){this.canvas.width=e,this.canvas.height=t}},{key:"movementSpace",value:function(e,t){var s=this;this.posCanvasLeft=parseInt(this.posCanvasLeft+e),this.posCanvasTop=parseInt(this.posCanvasTop+t),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),eachObjProps(this.objStars,function(){new DrawSpaceElements(s.ctx,this.leftSpace+s.posCanvasLeft,this.topSpace+s.posCanvasTop)})}}]),e}(),reqAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},newInstance=new FinallClass("SpaceShip","wheel","wheelWrap",500,350),instanceManegement=newInstance.managementWheel();function run(){var e=instanceManegement.speedCanvasMovement();newInstance.setObjStars(e.speedLeft,e.speedTop),newInstance.movementSpace(e.speedLeft,e.speedTop),reqAnimationFrame(run)}run();