"use strict";function eachObjProps(e,t){var i=0;for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e}function getRandomStr(e,t){return Math.floor(Math.random()*(t-e+1))+e}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Management=function(){function e(t,i){_classCallCheck(this,e),this.wheelWrap=document.getElementById(i),this.wheel=document.getElementById(t),this.posLeft=0,this.posTop=0,this.wheelWrapGBCR=this.wheelWrap.getBoundingClientRect(),this.wheelGBCR=this.wheel.getBoundingClientRect(),this.centerRectWrapX=this.wheelWrapGBCR.width/2,this.centerRectWrapY=this.wheelWrapGBCR.height/2,this.keyFirstDrag=!0,this.keyMoveX=!1,this.keyMoveY=!1,this.backSpeed=5,this.init()}return _createClass(e,[{key:"runWhell",value:function(){var e=this;this.wheel.onmousedown=function(t){var i=e.wheelWrap.getBoundingClientRect(),s=e.wheel.getBoundingClientRect();e.wheelGBCR=s,e.wheelWrap.onmousemove=function(t){var n=t.clientX-i.left,a=s.width/2,h=i.width-s.width/2;n<=a?n=a:n>=h&&(n=h);var r=t.clientY-i.top,o=s.height/2,c=i.height-s.height/2;r<=o?r=o:r>=c&&(r=c),e.movementWhell(n,r)}},document.onmouseup=function(){e.wheelWrap.onmousemove=function(){},e.keyMoveX=!0,e.keyMoveY=!0}}},{key:"movementWhell",value:function(e,t){this.wheel.style.left=e+"px",this.wheel.style.top=t+"px",this.posLeft=e,this.posTop=t}},{key:"backWheel",value:function(){!0===this.keyFirstDrag&&(this.posLeft=this.centerRectWrapX,this.posTop=this.centerRectWrapY,this.keyFirstDrag=!1),!0===this.keyMoveX&&(this.posLeft<this.centerRectWrapX-this.backSpeed?this.posLeft+=this.backSpeed:this.posLeft>this.centerRectWrapX+this.backSpeed?this.posLeft-=this.backSpeed:(this.posLeft=this.centerRectWrapX,this.keyMoveX=!1),this.movementWhell(this.posLeft,this.posTop)),!0===this.keyMoveY&&(this.posTop<this.centerRectWrapY-this.backSpeed?this.posTop+=this.backSpeed:this.posTop>this.centerRectWrapY+this.backSpeed?this.posTop-=this.backSpeed:(this.posTop=this.centerRectWrapY,this.keyMoveY=!1),this.movementWhell(this.posLeft,this.posTop))}},{key:"speedCanvasMovement",value:function(){this.backWheel();return{speedLeft:(this.centerRectWrapX-this.posLeft)/10,speedTop:(this.centerRectWrapY-this.posTop)/10}}},{key:"init",value:function(){this.runWhell()}}]),e}();_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var DrawSpaceElements=function(){function e(t,i,s){_classCallCheck(this,e),this.ctx=t,this.posLeft=i,this.posTop=s,this.init()}return _createClass(e,[{key:"createStar",value:function(){this.ctx.beginPath(),this.ctx.arc(this.posLeft,this.posTop,10,0,2*Math.PI),this.ctx.fillStyle="green",this.ctx.fill()}},{key:"init",value:function(){this.createStar()}}],[{key:"createObjStar",value:function(e,t,i,s){return i["star"+t]={leftSpace:e.leftSpace,topSpace:e.topSpace},t+=1,Object.keys(i).length>=s&&delete i["star"+(t-s)],{firstStar:t,objStars:i}}}]),e}();_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var DrawShip=function(){function e(t,i,s,n,a){_classCallCheck(this,e),this.ctx=t,this.shipWidth=50,this.shipHeight=20,this.posLeft=i-this.shipWidth/2,this.posTop=s-this.shipHeight/2,this.biasLeft=n,this.biasTop=a,this.init()}return _createClass(e,[{key:"createShip",value:function(){var e=4*(.01-this.biasLeft),t=4*(.01-this.biasTop);this.ctx.beginPath(),this.ctx.rect(this.posLeft+e,this.posTop+t,this.shipWidth,this.shipHeight),this.ctx.fillStyle="black",this.ctx.fill()}},{key:"init",value:function(){this.createShip()}}]),e}();_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var FinallClass=function(){function e(t,i,s,n,a){_classCallCheck(this,e),this.idCanvas=t,this.wheel=i,this.wheelWrap=s,this.widthCanvas=n,this.heightCanvas=a,this.declareVariables(),this.setSizeCanvas(this.widthCanvas,this.heightCanvas)}return _createClass(e,[{key:"setSizeCanvas",value:function(e,t){this.canvas.width=e,this.canvas.height=t}},{key:"declareVariables",value:function(){this.canvas=document.getElementById(this.idCanvas),this.ctx=this.canvas.getContext("2d"),this.increment=0,this.intensity=5,this.objStars={},this.coordsStar={},this.spaceBetween=40,this.firstStar=0,this.countStars=10,this.posShipLeft=this.widthCanvas/2,this.posShipTop=this.heightCanvas/2}},{key:"managementWheel",value:function(){return new Management(this.wheel,this.wheelWrap)}},{key:"setObjStars",value:function(e,t){if(this.increment=this.increment+.1,this.increment>=this.intensity){this.coordsStar.leftSpace=getRandomStr(this.spaceBetween,this.widthCanvas-this.spaceBetween),this.coordsStar.topSpace=getRandomStr(this.spaceBetween,this.heightCanvas-this.spaceBetween);var i=DrawSpaceElements.createObjStar(this.coordsStar,this.firstStar,this.objStars,this.countStars);this.firstStar=i.firstStar,this.objStars=i.objStars,this.increment=0}}},{key:"createShip",value:function(e,t){return new DrawShip(this.ctx,this.posShipLeft,this.posShipTop,e,t)}},{key:"movementSpace",value:function(e,t){var i=this;this.setObjStars(e,t),eachObjProps(this.objStars,function(){this.leftSpace=this.leftSpace+e,this.topSpace=this.topSpace+t,new DrawSpaceElements(i.ctx,this.leftSpace,this.topSpace)}),this.createShip(e,t)}},{key:"cleanCanvas",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}}]),e}(),reqAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},newInstance=new FinallClass("SpaceShip","wheel","wheelWrap",500,350),instanceManegement=newInstance.managementWheel();function run(){var e=instanceManegement.speedCanvasMovement();newInstance.cleanCanvas(),newInstance.movementSpace(e.speedLeft,e.speedTop),reqAnimationFrame(run)}run();